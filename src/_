#:lib/!.sh

# Libraries

#:lib/array.sh
#:lib/color.sh
#:lib/deb.sh
#:lib/defer.sh
#:lib/file.sh
#:lib/filetype.sh
#:lib/flag.sh
#:lib/git.sh
#:lib/http.sh
#:lib/os.sh
#:lib/path.sh
#:lib/self.sh
#:lib/string.sh
#:lib/temp.sh
#:lib/text.sh
#:lib/ui.sh
#:lib/url.sh
#:lib/virt.sh
#:lib/zip.sh

# Commands

#:cmd/_.sh
#:cmd/bin.sh
#:cmd/deb.sh
#:cmd/file.sh
#:cmd/filetype.sh
#:cmd/git.sh
#:cmd/http.sh
#:cmd/os.sh
#:cmd/self.sh
#:cmd/src.sh
#:cmd/text.sh
#:cmd/ui.sh
#:cmd/url.sh
#:cmd/virt.sh
#:cmd/zip.sh

if [[ ${UNDERSCORE_SOURCE:-} = true ]] || [[ "${BASH_SOURCE[0]}" = "$0" ]]; then
	#/help/
	#/command/

	.source() {
		echo "_SELF=$(self.path)"
		echo
		sed 's/^\t\t//' <<'EOF'
		#:lib/!.sh: .prelude+
		#:src/_.sh
EOF
	}

	#:lib/main.sh

	.main() {
		if ! .interactive && [[ $# -eq 0 ]]; then
			.source
		else
			.dispatch "$@"
		fi
	}

	.main "$@"
fi
